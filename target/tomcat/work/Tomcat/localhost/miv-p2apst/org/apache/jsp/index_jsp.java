/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2025-10-27 03:35:35 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class index_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

    // ===================================================
    // ✅ PERBAIKAN 1: AUTHORIZATION CHECK KRUSIAL
    // Memeriksa apakah sesi 'username' ada. Jika tidak, redirect ke login.
    // ===================================================
    if (session.getAttribute("username") == null) {
        response.sendRedirect(request.getContextPath() + "/login.jsp");
        return; // Hentikan pemrosesan halaman
    }
    // ===================================================

    // Logic menentukan halaman & menu aktif
    String currentPage = request.getParameter("page");
    String currentMenu = request.getParameter("menu");

    if (currentPage == null || currentPage.trim().isEmpty()) {
        currentPage = "/views/dashboard/dashboard.jsp";
    }

    if (currentMenu == null || currentMenu.trim().isEmpty()) {
        request.setAttribute("menu", "dashboard");
    } else {
        request.setAttribute("menu", currentMenu);
    }

      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html lang=\"id\">\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <title>MIV Dashboard</title>\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n");
      out.write("    <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\" />\r\n");
      out.write("    <meta http-equiv=\"Pragma\" content=\"no-cache\" />\r\n");
      out.write("    <meta http-equiv=\"Expires\" content=\"0\" />\r\n");
      out.write("\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/css/style_tailwind_adis.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css\">\r\n");
      out.write("    \r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/css/jquery.dataTables.min.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/css/buttons.dataTables.min.css\">\r\n");
      out.write("\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/style.css\">\r\n");
      out.write("\r\n");
      out.write("    <style>\r\n");
      out.write("        html, body {\r\n");
      out.write("            font-size: 13px;\r\n");
      out.write("            line-height: 1.5;\r\n");
      out.write("            color: #374151;\r\n");
      out.write("            font-family: 'Inter', Arial, sans-serif;\r\n");
      out.write("            background-color: #f3f4f6;\r\n");
      out.write("            overflow-x: hidden; /* Pertahankan ini agar seluruh halaman tidak bergeser */\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #sidebar {\r\n");
      out.write("            width: 16rem;\r\n");
      out.write("            font-size: 12.5px;\r\n");
      out.write("            transition: width 0.3s ease;\r\n");
      out.write("            background-color: #1f2937;\r\n");
      out.write("            overflow-y: auto;\r\n");
      out.write("            scrollbar-width: thin;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #sidebar.collapsed { width: 4rem; }\r\n");
      out.write("        #sidebar.collapsed .sidebar-text, #sidebar.collapsed .submenu { display: none; }\r\n");
      out.write("\r\n");
      out.write("        .content-card { padding: 1.5rem !important; }\r\n");
      out.write("        .navbar { height: 50px; }\r\n");
      out.write("\r\n");
      out.write("        main { transition: margin-left 0.3s ease; }\r\n");
      out.write("        main.ml-64 { margin-left: 16rem; }\r\n");
      out.write("        main.ml-16 { margin-left: 4rem; }\r\n");
      out.write("\r\n");
      out.write("        /* Submenu Profil CSS (tidak diubah) */\r\n");
      out.write("        #submenu-profile::before {\r\n");
      out.write("            content: \"\";\r\n");
      out.write("            position: absolute;\r\n");
      out.write("            top: -6px;\r\n");
      out.write("            right: 16px;\r\n");
      out.write("            border-width: 6px;\r\n");
      out.write("            border-style: solid;\r\n");
      out.write("            border-color: transparent transparent #374151 transparent;\r\n");
      out.write("            opacity: 0;\r\n");
      out.write("            transform: translateY(-4px);\r\n");
      out.write("            transition: all 0.2s ease-out;\r\n");
      out.write("        }\r\n");
      out.write("        #submenu-profile.show::before {\r\n");
      out.write("            opacity: 1;\r\n");
      out.write("            transform: translateY(0);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Overlay Sidebar Mobile CSS (tidak diubah) */\r\n");
      out.write("        #sidebar-overlay {\r\n");
      out.write("            display: none;\r\n");
      out.write("            position: fixed;\r\n");
      out.write("            inset: 0;\r\n");
      out.write("            background: rgba(0, 0, 0, 0.45);\r\n");
      out.write("            z-index: 30;\r\n");
      out.write("            opacity: 0;\r\n");
      out.write("            transition: opacity 0.3s ease;\r\n");
      out.write("        }\r\n");
      out.write("        #sidebar-overlay.show {\r\n");
      out.write("            display: block;\r\n");
      out.write("            opacity: 1;\r\n");
      out.write("        }\r\n");
      out.write("        #submenu-profile {\r\n");
      out.write("            position: absolute;\r\n");
      out.write("            top: 45px;\r\n");
      out.write("            right: 0;\r\n");
      out.write("            z-index: 9999;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* --- */\r\n");
      out.write("        :root {\r\n");
      out.write("            --footer-height: 60px; /* tinggi footer default (bisa ubah di sini) */\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Supaya konten panjang tetap muncul penuh */\r\n");
      out.write("        /* #mainContentCard {\r\n");
      out.write("            overflow: visible;\r\n");
      out.write("        } */\r\n");
      out.write("\r\n");
      out.write("        /* Saat sidebar overlay muncul di mobile, footer tetap di bawah tapi tidak di atas overlay\r\n");
      out.write("        #sidebar-overlay.show + main #mainFooter {\r\n");
      out.write("            z-index: 20;\r\n");
      out.write("        } */\r\n");
      out.write("\r\n");
      out.write("        /* === SIDEBAR OVERLAY === */\r\n");
      out.write("        #sidebar-overlay {\r\n");
      out.write("        position: fixed;\r\n");
      out.write("        inset: 0; /* top:0; right:0; bottom:0; left:0 */\r\n");
      out.write("        background-color: rgba(0, 0, 0, 0.5);\r\n");
      out.write("        z-index: 50; /* paling atas */\r\n");
      out.write("        display: none;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #sidebar-overlay.show {\r\n");
      out.write("        display: block;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* === FOOTER SELALU MENEMPEL DI BAWAH === */\r\n");
      out.write("        #mainFooter {\r\n");
      out.write("        position: fixed;\r\n");
      out.write("        bottom: 0;\r\n");
      out.write("        left: 0;\r\n");
      out.write("        width: 100%;\r\n");
      out.write("        z-index: 30; /* di bawah overlay (50), di atas konten biasa */\r\n");
      out.write("        background-color: #ffffff;\r\n");
      out.write("        border-top: 1px solid #e5e7eb; /* garis pemisah halus */\r\n");
      out.write("        padding: 0.75rem 1rem; /* jarak dalam */\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* === LINK FOOTER === */\r\n");
      out.write("        #mainFooter a {\r\n");
      out.write("        color: #0891b2;\r\n");
      out.write("        }\r\n");
      out.write("        #mainFooter a:hover {\r\n");
      out.write("        text-decoration: underline;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* === WRAPPER UTAMA AGAR KONTEN TIDAK TERTUTUP FOOTER === */\r\n");
      out.write("        #mainContentWrapper {\r\n");
      out.write("        padding-bottom: var(--footer-height, 60px); /* pastikan ada ruang di bawah */\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("    </style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body class=\"min-h-screen flex flex-col\">\r\n");
      out.write("\r\n");
      out.write("    <nav class=\"fixed top-0 left-0 right-0 bg-cyan-600 navbar z-50 flex items-center justify-between px-4 shadow-lg\">\r\n");
      out.write("        <i class=\"toggleSidebar fa-solid fa-bars text-white cursor-pointer text-xl hover:text-cyan-200 transition\"></i>\r\n");
      out.write("\r\n");
      out.write("        <span class=\"text-white text-sm font-bold truncate\">MIV - Management Instansi Vertikal</span>\r\n");
      out.write("\r\n");
      out.write("        <div class=\"relative\">\r\n");
      out.write("            <img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/img/profile.jpg\"\r\n");
      out.write("                 class=\"rounded-full cursor-pointer toggleSubmenuProfile transition-all duration-200 ease-in-out hover:scale-110 shadow-md\"\r\n");
      out.write("                 width=\"36\" alt=\"Profile\">\r\n");
      out.write("\r\n");
      out.write("            <div id=\"submenu-profile\"\r\n");
      out.write("                 class=\"absolute right-0 mt-3 w-48 bg-gray-700 text-white rounded-md shadow-2xl z-50\r\n");
      out.write("                         transform scale-95 opacity-0 pointer-events-none transition-all duration-200 ease-out origin-top\">\r\n");
      out.write("                <div class=\"text-center border-b border-gray-600 p-3\">\r\n");
      out.write("                    <span class=\"block text-sm font-semibold\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.username}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>\r\n");
      out.write("                    <span class=\"block text-xs text-gray-300\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.userRole}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span>\r\n");
      out.write("                </div>\r\n");
      out.write("                <a href=\"#\" class=\"block px-4 py-2 text-sm hover:bg-gray-600 transition-all\">\r\n");
      out.write("                    <i class=\"fa-solid fa-gear mr-2\"></i> Setting\r\n");
      out.write("                </a>\r\n");
      out.write("                <a href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/LogoutServlet\" class=\"block px-4 py-2 text-sm hover:bg-gray-600 transition-all\">\r\n");
      out.write("                    <i class=\"fa-solid fa-right-from-bracket mr-2\"></i> Logout\r\n");
      out.write("                </a>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </nav>\r\n");
      out.write("\r\n");
      out.write("    <div class=\"flex h-screen overflow-hidden\" style=\"padding-top: 50px;\">\r\n");
      out.write("        <aside id=\"sidebar\" class=\"fixed top-[50px] left-0 h-full w-64 text-gray-100 hidden md:flex flex-col z-40\">\r\n");
      out.write("            ");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/views/templates/sidebar.jsp", out, false);
      out.write("\r\n");
      out.write("        </aside>\r\n");
      out.write("\r\n");
      out.write("        <div id=\"sidebar-overlay\"></div>\r\n");
      out.write("\r\n");
      out.write("        <main id=\"mainContent\"\r\n");
      out.write("            class=\" w-full ml-64 bg-gray-100 flex flex-col min-h-screen p-4 transition-all duration-300 ease-in-out relative\r\n");
      out.write("                    overflow-x-auto overflow-y-auto\">\r\n");
      out.write("\r\n");
      out.write("            <!-- ✅ Wrapper agar konten tidak tertutup footer -->\r\n");
      out.write("            <div id=\"mainContentWrapper\" class=\"pb-[var(--footer-height,60px)] flex-1\">\r\n");
      out.write("                <div id=\"mainContentCard\"\r\n");
      out.write("                    class=\"bg-white rounded-xl shadow content-card w-full mb-4 overflow-auto\">\r\n");
      out.write("                    ");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response,  currentPage , out, false);
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <!-- ✅ Footer adaptif, menempel di bawah -->\r\n");
      out.write("            <footer id=\"mainFooter\"\r\n");
      out.write("                    class=\"fixed bottom-0 left-0 right-0 bg-gray-200 border-t border-gray-300 \r\n");
      out.write("                        flex items-center justify-center text-xs text-gray-600 z-40 transition-all duration-300\"\r\n");
      out.write("                    style=\"height: 30px;\">\r\n");
      out.write("                <strong>MangAdi&copy; 2025 \r\n");
      out.write("                    <a href=\"#\" class=\"text-cyan-600 hover:underline\">MIV</a>.\r\n");
      out.write("                </strong> All rights reserved.\r\n");
      out.write("            </footer>\r\n");
      out.write("        </main>\r\n");
      out.write("\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/js/jquery-3.7.1.min.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/js/jquery.dataTables.min.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/js/dataTables.buttons.min.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/js/buttons.html5.min.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/dataTables/js/jszip.min.js\"></script>\r\n");
      out.write("    <script src=\"https://cdn.jsdelivr.net/npm/flatpickr\"></script>\r\n");
      out.write("    <script src=\"https://npmcdn.com/flatpickr/dist/l10n/id.js\"></script>\r\n");
      out.write("    <script src=\"https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/index.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/excel/js/xlsx.full.min.js\"></script>\r\n");
      out.write("    <script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/assets/js/style_tailwind_adis.js\"></script>\r\n");
      out.write("\r\n");
      out.write("    <script>\r\n");
      out.write("        document.addEventListener(\"DOMContentLoaded\", function () {\r\n");
      out.write("            const sidebar = document.getElementById('sidebar');\r\n");
      out.write("            const main = document.getElementById('mainContent');\r\n");
      out.write("            const sidebarOverlay = document.getElementById('sidebar-overlay');\r\n");
      out.write("            const profileToggle = document.querySelector(\".toggleSubmenuProfile\");\r\n");
      out.write("            const profileMenu = document.getElementById(\"submenu-profile\");\r\n");
      out.write("            const footer = document.getElementById(\"mainFooter\");\r\n");
      out.write("\r\n");
      out.write("            // Asumsikan div konten utama memiliki ID, atau kita seleksi berdasarkan class unik.\r\n");
      out.write("            // Berdasarkan struktur HTML Anda, konten card adalah anak pertama dari main.\r\n");
      out.write("            const mainContentCard = main.querySelector('.content-card'); \r\n");
      out.write("\r\n");
      out.write("            // ===================================================\r\n");
      out.write("            // 1. Logic Profile Menu \r\n");
      out.write("            // ===================================================\r\n");
      out.write("            if (profileToggle && profileMenu) {\r\n");
      out.write("                function toggleProfileMenu(show) {\r\n");
      out.write("                    const isVisible = (typeof show === 'boolean') ? show : !profileMenu.classList.contains(\"opacity-100\");\r\n");
      out.write("                    profileMenu.classList.toggle(\"opacity-100\", isVisible);\r\n");
      out.write("                    profileMenu.classList.toggle(\"scale-100\", isVisible);\r\n");
      out.write("                    profileMenu.classList.toggle(\"pointer-events-auto\", isVisible);\r\n");
      out.write("                    \r\n");
      out.write("                    profileMenu.classList.toggle(\"opacity-0\", !isVisible);\r\n");
      out.write("                    profileMenu.classList.toggle(\"scale-95\", !isVisible);\r\n");
      out.write("                    profileMenu.classList.toggle(\"pointer-events-none\", !isVisible);\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                profileToggle.addEventListener(\"click\", function (e) {\r\n");
      out.write("                    e.stopPropagation();\r\n");
      out.write("                    toggleProfileMenu();\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                // Klik di luar area submenu untuk menutupnya\r\n");
      out.write("                document.addEventListener(\"click\", function (e) {\r\n");
      out.write("                    if (!profileMenu.contains(e.target) && !profileToggle.contains(e.target)) {\r\n");
      out.write("                        toggleProfileMenu(false); // Sembunyikan\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            // ===================================================\r\n");
      out.write("            // 2. ✅ KUNCI PERBAIKAN: Logic Layout Responsif Terpusat\r\n");
      out.write("            // ===================================================\r\n");
      out.write("\r\n");
      out.write("            function adjustLayout() {\r\n");
      out.write("                const isDesktop = window.innerWidth >= 768;\r\n");
      out.write("\r\n");
      out.write("                // --- Logika Margin (Mengatasi Isu Mobile Resize) ---\r\n");
      out.write("                if (isDesktop) {\r\n");
      out.write("                    // Pastikan sidebar terlihat di desktop\r\n");
      out.write("                    sidebar.classList.remove(\"hidden\");\r\n");
      out.write("                    sidebarOverlay.classList.remove(\"show\");\r\n");
      out.write("\r\n");
      out.write("                    // Tentukan margin awal berdasarkan status collapsed/default\r\n");
      out.write("                    if (!sidebar.classList.contains(\"collapsed\")) {\r\n");
      out.write("                        main.classList.remove(\"ml-16\");\r\n");
      out.write("                        main.classList.add(\"ml-64\"); // Sidebar terlihat penuh (default)\r\n");
      out.write("                    } else {\r\n");
      out.write("                        main.classList.remove(\"ml-64\");\r\n");
      out.write("                        main.classList.add(\"ml-16\"); // Sidebar collapsed\r\n");
      out.write("                    }\r\n");
      out.write("                } \r\n");
      out.write("                else {\r\n");
      out.write("                    // ✅ Mobile: Hapus SEMUA margin kiri dan set sidebar ke hidden secara default\r\n");
      out.write("                    main.classList.remove(\"ml-64\", \"ml-16\");\r\n");
      out.write("                    \r\n");
      out.write("                    // Hapus collapsed class di mobile\r\n");
      out.write("                    if (sidebar.classList.contains(\"collapsed\")) {\r\n");
      out.write("                        sidebar.classList.remove(\"collapsed\");\r\n");
      out.write("                    }\r\n");
      out.write("                    \r\n");
      out.write("                    // Sembunyikan sidebar, kecuali jika overlay sedang tampil (sidebar terbuka)\r\n");
      out.write("                    if (!sidebarOverlay.classList.contains(\"show\")) {\r\n");
      out.write("                        sidebar.classList.add(\"hidden\");\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                // --- Logika Konten Card (min-height) ---\r\n");
      out.write("                if (mainContentCard) {\r\n");
      out.write("                    // Terapkan min-h-[calc(100%-60px)] hanya jika di Desktop ATAU di Mobile saat sidebar terbuka (overlay show)\r\n");
      out.write("                    const shouldBeTall = isDesktop || sidebarOverlay.classList.contains(\"show\");\r\n");
      out.write("                    mainContentCard.classList.toggle(\"min-h-[calc(100%-60px)]\", shouldBeTall);\r\n");
      out.write("                }\r\n");
      out.write("                \r\n");
      out.write("                // Adjust DataTables setelah layout berubah (penting untuk rendering)\r\n");
      out.write("                setTimeout(() => {\r\n");
      out.write("                    if (typeof table !== 'undefined' && table !== null) {\r\n");
      out.write("                        table.columns.adjust().draw();\r\n");
      out.write("                    }\r\n");
      out.write("                    if (typeof table_detail_upi !== 'undefined' && table_detail_upi !== null) {\r\n");
      out.write("                        table_detail_upi.columns.adjust().draw();\r\n");
      out.write("                    }\r\n");
      out.write("                }, 150);\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // Panggil fungsi adjustLayout saat halaman dimuat\r\n");
      out.write("            adjustLayout(); \r\n");
      out.write("\r\n");
      out.write("            // Panggil saat window resize (dengan debounce)\r\n");
      out.write("            let resizeTimer;\r\n");
      out.write("            window.addEventListener('resize', () => {\r\n");
      out.write("                clearTimeout(resizeTimer);\r\n");
      out.write("                resizeTimer = setTimeout(adjustLayout, 150);\r\n");
      out.write("            });\r\n");
      out.write("            \r\n");
      out.write("            // ===================================================\r\n");
      out.write("            // 3. Logic Toggle Sidebar \r\n");
      out.write("            // ===================================================\r\n");
      out.write("            document.querySelectorAll(\".toggleSidebar\").forEach(btn => {\r\n");
      out.write("                btn.addEventListener(\"click\", () => {\r\n");
      out.write("                    const isDesktop = window.innerWidth >= 768;\r\n");
      out.write("                    \r\n");
      out.write("                    if (isDesktop) {\r\n");
      out.write("                        sidebar.classList.toggle(\"collapsed\");\r\n");
      out.write("                        main.classList.toggle(\"ml-16\");\r\n");
      out.write("                        main.classList.toggle(\"ml-64\"); \r\n");
      out.write("                    } \r\n");
      out.write("                    else {\r\n");
      out.write("                        const isHidden = sidebar.classList.toggle(\"hidden\");\r\n");
      out.write("                        sidebarOverlay.classList.toggle(\"show\", !isHidden);\r\n");
      out.write("                        \r\n");
      out.write("                        // ✅ Update min-h konten saat toggle di mobile\r\n");
      out.write("                        if (mainContentCard) {\r\n");
      out.write("                            mainContentCard.classList.toggle(\"min-h-[calc(100%-60px)]\", !isHidden);\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    // Adjust DataTables \r\n");
      out.write("                    setTimeout(() => {\r\n");
      out.write("                        if (typeof table !== 'undefined' && table !== null) {\r\n");
      out.write("                            table.columns.adjust().draw();\r\n");
      out.write("                        }\r\n");
      out.write("                        if (typeof table_detail_upi !== 'undefined' && table_detail_upi !== null) {\r\n");
      out.write("                            table_detail_upi.columns.adjust().draw();\r\n");
      out.write("                        }\r\n");
      out.write("                    }, 350);\r\n");
      out.write("                });\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            // Sembunyikan footer saat sidebar overlay muncul di mobile\r\n");
      out.write("            sidebarOverlay.addEventListener(\"click\", () => {\r\n");
      out.write("                sidebar.classList.add(\"hidden\");\r\n");
      out.write("                sidebarOverlay.classList.remove(\"show\");\r\n");
      out.write("                if (footer) footer.classList.remove(\"hidden\");\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            document.querySelectorAll(\".toggleSidebar\").forEach(btn => {\r\n");
      out.write("                btn.addEventListener(\"click\", () => {\r\n");
      out.write("                    const isMobile = window.innerWidth < 768;\r\n");
      out.write("                    if (isMobile) {\r\n");
      out.write("                        const isHidden = sidebar.classList.toggle(\"hidden\");\r\n");
      out.write("                        sidebarOverlay.classList.toggle(\"show\", !isHidden);\r\n");
      out.write("                        if (footer) footer.classList.toggle(\"hidden\", !isHidden); // footer hilang saat overlay tampil\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("        });\r\n");
      out.write("    </script>\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
