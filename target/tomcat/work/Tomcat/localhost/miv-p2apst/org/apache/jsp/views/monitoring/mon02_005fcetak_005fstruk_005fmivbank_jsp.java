/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2025-11-18 03:29:43 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.views.monitoring;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class mon02_005fcetak_005fstruk_005fmivbank_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- üîπ FORM FILTER -->\r\n");
      out.write("<div class=\"flex justify-center\">\r\n");
      out.write("    <fieldset class=\"border border-gray-300 rounded p-5 mt-4 w-full md:w-[760px] mx-auto bg-white shadow text-left\">\r\n");
      out.write("        <legend class=\"text-sm font-bold px-3 text-left\">Download/Print Struk - Bank MIV</legend>\r\n");
      out.write("\r\n");
      out.write("        <form id=\"form-monitoring\">\r\n");
      out.write("            <div class=\"flex justify-center\">\r\n");
      out.write("                <div class=\"grid grid-cols-12 gap-3 mb-2 w-full md:w-[640px]\">\r\n");
      out.write("\r\n");
      out.write("                    <!-- Bulan Laporan -->\r\n");
      out.write("                    <div class=\"col-span-12 md:col-span-6\">\r\n");
      out.write("                        <label for=\"bln_usulan\" class=\"block text-gray-700 mb-1 font-medium\">Bulan Laporan :</label>\r\n");
      out.write("                        <div class=\"flex border border-gray-300 rounded items-center\">\r\n");
      out.write("                            <input type=\"text\" id=\"bln_usulan\" class=\"flex-1 px-3 py-2 text-sm uppercase focus:outline-none focus:ring-1 focus:ring-blue-500\" placeholder=\"Pilih Bulan Laporan\" readonly>\r\n");
      out.write("                            <i id=\"calendarIcon\" class=\"fa fa-calendar text-gray-500 px-3 cursor-pointer hover:text-blue-600\"></i>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <input type=\"hidden\" id=\"bln_usulan_value\" name=\"bln_usulan_value\">\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                    <!-- Bank MIV -->\r\n");
      out.write("                    <div class=\"col-span-12 md:col-span-6\">\r\n");
      out.write("                        <label for=\"bank_miv\" class=\"block text-gray-700 mb-1 font-medium\">Bank MIV :</label>\r\n");
      out.write("                        <select id=\"bank_miv\" name=\"bank_miv\" class=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500\">\r\n");
      out.write("                            <option value=\"\">-- Pilih Bank MIV --</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"flex justify-center\">\r\n");
      out.write("                <div class=\"grid grid-cols-12 gap-3 mb-2 w-full md:w-[640px]\">\r\n");
      out.write("\r\n");
      out.write("                    <!-- Distribusi -->\r\n");
      out.write("                    <div class=\"col-span-12 md:col-span-6\">\r\n");
      out.write("                        <label for=\"diswil\" class=\"block text-gray-700 mb-1 font-medium\">Distribusi/Wilayah :</label>\r\n");
      out.write("                        <select id=\"diswil\" name=\"diswil\" class=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500\">\r\n");
      out.write("                            <option value=\"\">-- Pilih Distribusi --</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                    <!-- UP3 -->\r\n");
      out.write("                    <div class=\"col-span-12 md:col-span-6\">\r\n");
      out.write("                        <label for=\"up3\" class=\"block text-gray-700 mb-1 font-medium\">UP3 :</label>\r\n");
      out.write("                        <select id=\"up3\" name=\"up3\" class=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500\">\r\n");
      out.write("                            <option value=\"\">-- Pilih UP3 --</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <!-- Tombol Tampilkan -->\r\n");
      out.write("            <div class=\"col-span-12 md:col-span-2 mt-4 flex justify-center\">\r\n");
      out.write("                <button id=\"btnTampil\" type=\"button\" class=\"max-w-[140px] w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-3 py-2 rounded shadow flex items-center justify-center gap-2 transition duration-150 ease-in-out\">\r\n");
      out.write("                    <i class=\"fa fa-search\"></i> <span>Tampilkan</span>\r\n");
      out.write("                </button>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("        </form>\r\n");
      out.write("    </fieldset>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<!-- Wrapper utama untuk daftar file PDF -->\r\n");
      out.write("<div class=\"flex justify-center\">\r\n");
      out.write("    <fieldset class=\"border border-gray-300 rounded p-5 mt-4 w-full md:w-[760px] text-center bg-white shadow\">\r\n");
      out.write("        <h3 class=\"text-xl font-semibold mb-4\">üìÇ Daftar File PDF</h3>\r\n");
      out.write("        <div id=\"loading\" class=\"text-blue-600 animate-pulse mb-3\">Memuat daftar file dari FTP...</div>\r\n");
      out.write("        <div class=\"flex justify-center\">\r\n");
      out.write("            <select id=\"thelist\" size=\"10\" class=\"border border-gray-300 rounded w-full md:w-[720px] p-2\" multiple></select>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"flex justify-center mt-4\">\r\n");
      out.write("            <button id=\"btnPrint\" type=\"button\" class=\"max-w-[160px] w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded shadow flex items-center justify-center gap-2 transition duration-150 ease-in-out\">\r\n");
      out.write("                <i class=\"fa fa-print\"></i> <span>Print PDF</span>\r\n");
      out.write("            </button>\r\n");
      out.write("        </div>\r\n");
      out.write("    </fieldset>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<script>\r\n");
      out.write("document.addEventListener(\"DOMContentLoaded\", function() {\r\n");
      out.write("    // 0) getContextPath\r\n");
      out.write("    function getContextPath() {\r\n");
      out.write("        return '");
      out.print( request.getContextPath() );
      out.write("';\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 1) Load FTP files otomatis\r\n");
      out.write("    async function loadFtpFiles() {\r\n");
      out.write("        const loading = document.getElementById('loading');\r\n");
      out.write("        const list = document.getElementById('thelist');\r\n");
      out.write("        try {\r\n");
      out.write("            const raw = document.getElementById(\"bln_usulan\").value;\r\n");
      out.write("            const thblalp   = convertBulanTahunToYYYYMM(raw);\r\n");
      out.write("            const bank_miv  = document.getElementById(\"bank_miv\").value;\r\n");
      out.write("            const diswil    = document.getElementById(\"diswil\").value;\r\n");
      out.write("            const up3       = document.getElementById(\"up3\").value;\r\n");
      out.write("\r\n");
      out.write("            console.log(\"thblalp =\", thblalp);\r\n");
      out.write("            console.log(\"bank_miv =\", bank_miv);\r\n");
      out.write("            console.log(\"diswil =\", diswil);\r\n");
      out.write("            console.log(\"up3 =\", up3);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            loading.style.display = 'block';\r\n");
      out.write("            loading.textContent = \"Memuat daftar file dari FTP...\";\r\n");
      out.write("            list.innerHTML = '';\r\n");
      out.write("\r\n");
      out.write("            // const linkpathfile = '/mon2strukbank/list?thbl='     + thblalp  +\r\n");
      out.write("            //                                         '&bankmiv='  + bank_miv +\r\n");
      out.write("            //                                         '&upi='      + diswil   +\r\n");
      out.write("            //                                         '&up3='       + up3   ;\r\n");
      out.write("            const url = getContextPath()\r\n");
      out.write("                + \"/mon2strukbank?act=list\"\r\n");
      out.write("                + \"&thbl=\" + thblalp\r\n");
      out.write("                + \"&bankmiv=\" + bank_miv\r\n");
      out.write("                + \"&upi=\" + diswil\r\n");
      out.write("                + \"&up3=\" + up3;\r\n");
      out.write("\r\n");
      out.write("            const res = await fetch(url);\r\n");
      out.write("            // const res = await fetch(getContextPath() + linkpathfile);\r\n");
      out.write("            if (!res.ok) throw new Error(\"Gagal memuat data dari server\");\r\n");
      out.write("\r\n");
      out.write("            const files = await res.json();\r\n");
      out.write("            loading.style.display = 'none';\r\n");
      out.write("\r\n");
      out.write("            if (!files || files.length === 0) {\r\n");
      out.write("                const opt = document.createElement('option');\r\n");
      out.write("                opt.textContent = \"Tidak ada file di folder FTP.\";\r\n");
      out.write("                list.appendChild(opt);\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            files.forEach(filePath => {\r\n");
      out.write("                const opt = document.createElement('option');\r\n");
      out.write("                opt.value = filePath;   // path lengkap FTP\r\n");
      out.write("                opt.textContent = filePath.split('/').pop(); // tampilkan hanya nama file\r\n");
      out.write("                list.appendChild(opt);\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("        } catch (err) {\r\n");
      out.write("            loading.innerHTML = '<span class=\"text-red-600\">Terjadi kesalahan: ' + err.message + '</span>';\r\n");
      out.write("        }\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 2a) Flatpickr\r\n");
      out.write("    if (typeof flatpickr !== \"undefined\") {\r\n");
      out.write("        const blnUsulan = document.getElementById('bln_usulan');\r\n");
      out.write("        const blnUsulanValue = document.getElementById('bln_usulan_value');\r\n");
      out.write("        const calendarIcon = document.getElementById('calendarIcon');\r\n");
      out.write("\r\n");
      out.write("        const fp = flatpickr(blnUsulan, {\r\n");
      out.write("            locale: \"id\",\r\n");
      out.write("            plugins: [new monthSelectPlugin({\r\n");
      out.write("                shorthand: false,\r\n");
      out.write("                dateFormat: \"F Y\",\r\n");
      out.write("                altFormat: \"Y-m\"\r\n");
      out.write("            })],\r\n");
      out.write("            defaultDate: new Date(),\r\n");
      out.write("            onChange: function(selectedDates) {\r\n");
      out.write("                const date = selectedDates[0];\r\n");
      out.write("                if (date) {\r\n");
      out.write("                    const yyyy = date.getFullYear();\r\n");
      out.write("                    const mm = String(date.getMonth() + 1).padStart(2, '0');\r\n");
      out.write("                    blnUsulanValue.value = yyyy + mm;\r\n");
      out.write("                }\r\n");
      out.write("            },\r\n");
      out.write("            onReady: function(selectedDates) {\r\n");
      out.write("                const date = selectedDates[0] || new Date();\r\n");
      out.write("                const yyyy = date.getFullYear();\r\n");
      out.write("                const mm = String(date.getMonth() + 1).padStart(2, '0');\r\n");
      out.write("                blnUsulanValue.value = yyyy + mm;\r\n");
      out.write("                blnUsulan.value = date.toLocaleString('id-ID', { month: 'long' }) + ' ' + yyyy;\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        calendarIcon.addEventListener('click', function() {\r\n");
      out.write("            fp.open();\r\n");
      out.write("        });\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 2b) Flatpickr\r\n");
      out.write("    function convertBulanTahunToYYYYMM(input) {\r\n");
      out.write("        const bulanMap = {\r\n");
      out.write("            \"Januari\": \"01\", \"Februari\": \"02\", \"Maret\": \"03\",\r\n");
      out.write("            \"April\": \"04\", \"Mei\": \"05\", \"Juni\": \"06\",\r\n");
      out.write("            \"Juli\": \"07\", \"Agustus\": \"08\", \"September\": \"09\",\r\n");
      out.write("            \"Oktober\": \"10\", \"November\": \"11\", \"Desember\": \"12\"\r\n");
      out.write("        };\r\n");
      out.write("\r\n");
      out.write("        const parts = input.split(\" \");   // \"November 2025\" ‚Üí [\"November\", \"2025\"]\r\n");
      out.write("        const bulan = bulanMap[parts[0]];\r\n");
      out.write("        const tahun = parts[1];\r\n");
      out.write("\r\n");
      out.write("        return tahun + bulan; // \"2025\" + \"11\" ‚Üí \"202511\"\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 3) Load Bank MIV\r\n");
      out.write("    async function loadBankMIV() {\r\n");
      out.write("        console.log(\"üîÑ Memuat daftar bank MIV...\");\r\n");
      out.write("        const params = new URLSearchParams();\r\n");
      out.write("        params.append('act', 'getNamaBank');\r\n");
      out.write("        params.append('kdbank', '');\r\n");
      out.write("\r\n");
      out.write("        try {\r\n");
      out.write("            const res = await fetch(getContextPath() + '/mst-global', {\r\n");
      out.write("                method: 'POST',\r\n");
      out.write("                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n");
      out.write("                body: params.toString()\r\n");
      out.write("            });\r\n");
      out.write("            if (!res.ok) throw new Error(\"HTTP Error \" + res.status);\r\n");
      out.write("            const json = await res.json();\r\n");
      out.write("\r\n");
      out.write("            const select = document.getElementById('bank_miv');\r\n");
      out.write("            select.innerHTML = '<option value=\"\">-- Pilih Bank MIV --</option>';\r\n");
      out.write("\r\n");
      out.write("            if (json.status === 'success' && Array.isArray(json.data)) {\r\n");
      out.write("                json.data.forEach(bank => {\r\n");
      out.write("                    const opt = document.createElement('option');\r\n");
      out.write("                    opt.value = bank.KODE_ERP;\r\n");
      out.write("                    opt.textContent = bank.NAMA_BANK;\r\n");
      out.write("                    select.appendChild(opt);\r\n");
      out.write("                });\r\n");
      out.write("                console.log(\"‚úÖ Bank MIV berhasil dimuat:\", json.data.length, \"data\");\r\n");
      out.write("            } else {\r\n");
      out.write("                const opt = document.createElement('option');\r\n");
      out.write("                opt.textContent = \"Tidak ada data bank\";\r\n");
      out.write("                select.appendChild(opt);\r\n");
      out.write("            }\r\n");
      out.write("        } catch (err) {\r\n");
      out.write("            console.error(\"‚ùå Error JS:\", err.message);\r\n");
      out.write("        }\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 4) Load DIS/WIL\r\n");
      out.write("    async function loadDisWilMIV() {\r\n");
      out.write("        console.log(\"üîÑ Memuat daftar DIS/WIL...\");\r\n");
      out.write("\r\n");
      out.write("        const params = new URLSearchParams();\r\n");
      out.write("        params.append('act', 'getNamaUnitUPI');\r\n");
      out.write("        params.append('kd_dist', 'ALL');\r\n");
      out.write("\r\n");
      out.write("        try {\r\n");
      out.write("            const res = await fetch(getContextPath() + '/mst-global', {\r\n");
      out.write("                method: 'POST',\r\n");
      out.write("                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n");
      out.write("                body: params.toString()\r\n");
      out.write("            });\r\n");
      out.write("            if (!res.ok) throw new Error(\"HTTP Error \" + res.status);\r\n");
      out.write("            const json = await res.json();\r\n");
      out.write("\r\n");
      out.write("            const select = document.getElementById('diswil');\r\n");
      out.write("            select.innerHTML = '<option value=\"\">-- Pilih DIS/WIL MIV --</option>';\r\n");
      out.write("\r\n");
      out.write("            if (json.status === 'success' && Array.isArray(json.data)) {\r\n");
      out.write("                json.data.forEach(diswil => {\r\n");
      out.write("                    const opt = document.createElement('option');\r\n");
      out.write("                    opt.value = diswil.KD_DIST;\r\n");
      out.write("                    opt.textContent = diswil.NAMA_DIST;\r\n");
      out.write("                    select.appendChild(opt);\r\n");
      out.write("                });\r\n");
      out.write("                console.log(\"‚úÖ DISWIL MIV berhasil dimuat:\", json.data.length, \"data\");\r\n");
      out.write("\r\n");
      out.write("                // Ambil DIS/WIL pertama otomatis\r\n");
      out.write("                // const firstKdDist = select.options[1]?.value;\r\n");
      out.write("                // if (firstKdDist) {\r\n");
      out.write("                //     select.value = firstKdDist;\r\n");
      out.write("                //     console.log(\"Distribusi pertama:\", firstKdDist);\r\n");
      out.write("                //     loadUP3MIV(firstKdDist);\r\n");
      out.write("                // }\r\n");
      out.write("            } else {\r\n");
      out.write("                const opt = document.createElement('option');\r\n");
      out.write("                opt.textContent = \"Tidak ada data DISWIL\";\r\n");
      out.write("                select.appendChild(opt);\r\n");
      out.write("            }\r\n");
      out.write("        } catch (err) {\r\n");
      out.write("            console.error(\"‚ùå Error JS:\", err.message);\r\n");
      out.write("        }\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // 5) Load UP3\r\n");
      out.write("    async function loadUP3MIV(kd_dist) {\r\n");
      out.write("        console.log(\"üîÑ Memuat daftar UP3 untuk kd_dist:\", kd_dist);\r\n");
      out.write("\r\n");
      out.write("        const params = new URLSearchParams();\r\n");
      out.write("        params.append('act', 'getNamaArea');\r\n");
      out.write("        params.append('kd_dist', kd_dist);\r\n");
      out.write("\r\n");
      out.write("        try {\r\n");
      out.write("            const res = await fetch(getContextPath() + '/mst-global', {\r\n");
      out.write("                method: 'POST',\r\n");
      out.write("                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n");
      out.write("                body: params.toString()\r\n");
      out.write("            });\r\n");
      out.write("            if (!res.ok) throw new Error(\"HTTP Error \" + res.status);\r\n");
      out.write("\r\n");
      out.write("            const text = await res.text();\r\n");
      out.write("            if (!text) return;\r\n");
      out.write("            const json = JSON.parse(text);\r\n");
      out.write("\r\n");
      out.write("            const select = document.getElementById('up3');\r\n");
      out.write("            select.innerHTML = '<option value=\"\">-- Pilih UP3 MIV --</option>';\r\n");
      out.write("\r\n");
      out.write("            if (json.status === 'success' && Array.isArray(json.data)) {\r\n");
      out.write("                json.data.forEach(up3 => {\r\n");
      out.write("                    const opt = document.createElement('option');\r\n");
      out.write("                    opt.value = up3.UNITAP;\r\n");
      out.write("                    opt.textContent = up3.NAMA_AREA;\r\n");
      out.write("                    select.appendChild(opt);\r\n");
      out.write("                });\r\n");
      out.write("                console.log(\"‚úÖ UP3 MIV berhasil dimuat:\", json.data.length, \"data\");\r\n");
      out.write("            } else {\r\n");
      out.write("                const opt = document.createElement('option');\r\n");
      out.write("                opt.textContent = \"Tidak ada data UP3\";\r\n");
      out.write("                select.appendChild(opt);\r\n");
      out.write("            }\r\n");
      out.write("        } catch (err) {\r\n");
      out.write("            console.error(\"‚ùå Error JS:\", err.message);\r\n");
      out.write("        }\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    // --- Jalankan otomatis ---\r\n");
      out.write("    // loadFtpFiles();\r\n");
      out.write("    loadBankMIV();\r\n");
      out.write("    loadDisWilMIV();\r\n");
      out.write("\r\n");
      out.write("    // 6)--- Event listener ---\r\n");
      out.write("    document.getElementById('diswil').addEventListener('change', function() {\r\n");
      out.write("        const kd_dist = this.value;\r\n");
      out.write("        console.log(\"Distribusi terpilih:\", kd_dist);\r\n");
      out.write("        if (kd_dist) {\r\n");
      out.write("            loadUP3MIV(kd_dist);\r\n");
      out.write("        } else {\r\n");
      out.write("            document.getElementById('up3').innerHTML = '<option value=\"\">-- Pilih UP3 MIV --</option>';\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    // 7) tampilkan alert param sebelum neampilkan list struk\r\n");
      out.write("    document.getElementById('btnTampil').addEventListener('click', function () {\r\n");
      out.write("\r\n");
      out.write("        const bank_miv = document.getElementById(\"bank_miv\").value;\r\n");
      out.write("        if (!bank_miv || bank_miv.trim() === \"\") {\r\n");
      out.write("            alert(\"‚ö† Silakan pilih BANK MIV terlebih dahulu!\");\r\n");
      out.write("            return; // stop\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        const diswil    = document.getElementById(\"diswil\").value;\r\n");
      out.write("        if (!diswil || diswil.trim() === \"\") {\r\n");
      out.write("            alert(\"‚ö† Silakan pilih DISTRIBUSI/WILAYAH terlebih dahulu!\");\r\n");
      out.write("            return; // stop\r\n");
      out.write("        }\r\n");
      out.write("        \r\n");
      out.write("        const up3       = document.getElementById(\"up3\").value;\r\n");
      out.write("        if (!up3 || up3.trim() === \"\") {\r\n");
      out.write("            alert(\"‚ö† Silakan pilih PILIH UP3 dahulu!\");\r\n");
      out.write("            return; // stop\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // lanjut proses jika bank_miv terisi\r\n");
      out.write("        loadFtpFiles();\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    // 8) === Event tombol PRINT/Download file struk ===\r\n");
      out.write("    // === Event tombol PRINT/Download multiple files ===\r\n");
      out.write("    document.getElementById(\"btnPrint\").addEventListener(\"click\", function () {\r\n");
      out.write("        const list = document.getElementById(\"thelist\");\r\n");
      out.write("        const selected = Array.from(list.selectedOptions).map(opt => opt.value);\r\n");
      out.write("\r\n");
      out.write("        if (selected.length === 0) {\r\n");
      out.write("            alert(\"‚ö† Silakan pilih minimal 1 file PDF!\");\r\n");
      out.write("            return;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        selected.forEach((filePath, index) => {\r\n");
      out.write("            setTimeout(() => {\r\n");
      out.write("                window.open(\r\n");
      out.write("                    getContextPath()\r\n");
      out.write("                    + \"/mon2strukbank?act=download&file=\"\r\n");
      out.write("                    + encodeURIComponent(filePath),\r\n");
      out.write("                    \"_blank\"\r\n");
      out.write("                );\r\n");
      out.write("            }, index * 500); // beri jeda 0.5 detik per file\r\n");
      out.write("        });\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("});\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
